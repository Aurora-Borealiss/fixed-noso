<!DOCTYPE html>
<html lang="en">

    <head>
      <script src="https://cdn.amcharts.com/lib/5/xy.js"></script>
      <script src="https://cdn.amcharts.com/lib/5/index.js"></script>
      <script src="https://cdn.amcharts.com/lib/5/map.js"></script>
      <script src="https://cdn.amcharts.com/lib/5/geodata/worldLow.js"></script>
      <script src="https://cdn.amcharts.com/lib/5/themes/Animated.js"></script>
      <script src="https://cdn.amcharts.com/lib/5/radar.js"></script>
      <link rel="shortcut icon" type="image/x-icon" href="noso190X190.png" />
      <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Sharp:opsz,wght,FILL,GRAD@48,400,0,0" />
      <script type="text/javascript" src="main.js"></script>
      <meta charset="UTF-8">
      <style>
        h2 {text-align: center;}
        table, th, td {
          border: 1px solid black;
          border-collapse: collapse;
        }
      </style>
      <title>NOSO Masternodes</title>
  <link rel="icon" type="image/x-icon" href="../docs/images/nosocoin_favicon.png">
      <link rel="stylesheet" href="nodes.css">
      <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.9.4/Chart.min.js"
      integrity="sha512-d9xgZrVZpmmQlfonhQUvTR7lMPtO7NkZMkA0ABN3PHCbKA5nqylQ/yWlFAyY6hYgdF1Qh6nYiuADWwKB4C2WSw=="
      crossorigin="anonymous"></script>
      </head>
    <body>
        
    <div class="container">
        <aside>
            <div class="top">
                <div class="logo">
                    <img src="./images/nosologo.png">
                    <h2>NO<span class="warning">SO</span> Explorer</h2>
                </div>
            </div>
                <div class="close" id="close-btn">
                    <span class="material-symbols-sharp">close</span>
                </div>
                <div class="sidebar">
                    <a href="NosoCoin.html" class="">
                        <span class="material-symbols-sharp">grid_view</span>
                        <h3>Overview</h3>
                    </a>
                    <a href="nodes.html" class="">
                        <span class="material-symbols-sharp">view_in_AR</span>
                        <h3>Active Nodes</h3>
                    </a>
                    <a href="pools.html" class="">
                        <span class="material-symbols-sharp">Receipt_Long</span>
                        <h3>Map</h3>
                    </a>
                    <a href="addresses.html" class="active">
                        <span class="material-symbols-sharp">group</span>
                        <h3>Coins and Addresses</h3><span class="message-count">26</span>
                    </a>
                    </a>
                    <a href="#" class="">
                        <span class="material-symbols-sharp">report_gmailerrorred</span>
                        <h3>Reports</h3>
                    </a>
                </div>
        </aside>
<main>
        <div class="main">
              <button type="button" id="nodes" onclick="refreshNodes()"><h1>Active Nodes</h1></button>
               </style>  
            <div class="result">
                <table id="table1" >
                    <thead>
                    <tr>
                        <th>Node Address</th>
                        <th>Node IP</th>
                        <th>Port</th>
                        <th>Country</th>
                        <th>Region</th>
                        <th>Uptime</th>
                        <th>Latitude</th>
                        <th>Longitude</th>
                    </tr>
                  </thead>
                    <tbody>
                        <tr>
                          <td>Node Address</td>
                          <td>Node IP</td>
                          <td>Port</td>
                          <td>Country</td>
                          <td>Region</td>
                          <td>Uptime</td>
                          <td>Latitude</td>
                          <td>Longitude</td>
                          </tr>
                      </tbody>
                  </table>
              </div>
          </div>
        </main>
                <!------------------------ END OF MAIN ---------------------------->
                <div class="right">
                    <div class="top">
                        <button id="menu-btn">
                            <span class="material-symbols-sharp">list</span>
                        </button>
                        <div class="theme-toggler">
                            <span class="material-symbols-sharp active">light_mode</span>
                            <span class="material-symbols-sharp">dark_mode</span>
                        </div>
                        <div class="profile">
                            <div class="info">
                                <p>Hey, <b>Aurora</b></p>
                                <small class="text-muted">Admin</small>
                            </div>
                            <div class="profile-photo">
                                <img src="./images/profile1.png">
                            </div>
                        </div>
                    </div>
        <script>
            console.log('state :' , sessionStorage.state)
            if (window.menuState === 'nodes'){
            } else {
              document.getElementById("nodes").style.backgroundColor = "RGBA(96, 125, 139)";
              sessionStorage.setItem("state", 'nodes');nodes
              //pendingOrders()
              refreshNodes()
            }
            async function refreshNodes(){
              console.log('state inside refresh :' , sessionStorage.state)
              let response = await fetch(sessionStorage.apiServer + 'nodeList');
              let ourData = await response.json();
              document.getElementById("nodes").style.backgroundColor = "RGBA(96, 125, 139)";
              renderHTML(ourData);
              };
              function renderHTML(data) {
                    var rowCount = table1.rows.length; 
                    while(--rowCount) table1.deleteRow(rowCount);
                    // Add new
                    table1 = document.getElementById("table1");
                    for(let i = 0; i < data.length; i++){
                               // create a new row
                               var newRow = table1.insertRow(table1.length);
                               for(let j = 0; j < data[i].length; j++){
                                   // create a new cell
                                   var cell = newRow.insertCell(j);
                                   // add value to the cell
                                   cell.innerHTML = data[i][j];
                                   cell.addEventListener("click",function(e){ 
                                      e = this.textContent
                                      console.log(e)
                                      })
                               }
                           }
                  function getNumber(val) {
                     console.log(val)
                    }
                }
          </script>
      </body>
  </html>